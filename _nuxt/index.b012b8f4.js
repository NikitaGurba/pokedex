import S from"./image.esm.ec583640.js";import b from"./chip.esm.475017c2.js";import T from"./card.esm.c11b40cf.js";import{u as $,i as C,t as p,L as v,A as y,z as m,x as a,y as L,v as g,M as k,N as P,O as B,P as N,Q as O,r as q,o as H,G as w,R as h}from"./entry.7afb403f.js";import{T as M}from"./constants.486df467.js";import R from"./button.esm.6027d36b.js";import j from"./progressbar.esm.101f1613.js";import{g as I,u as z}from"./getPokemonsList.38ebffd7.js";import{g as A}from"./getPokemon.cec33ce2.js";import"./index.esm.5d60fbb7.js";import"./baseicon.esm.e3e5b612.js";import"./basecomponent.esm.c3cbaa0c.js";import"./index.esm.e5b92ded.js";import"./portal.esm.a9856c93.js";import"./index.esm.033cc52d.js";import"./badge.esm.0a526e79.js";import"./index.esm.cf294e55.js";const D={class:"font-bold"},E={class:"flex flex-row gap-1 flex-wrap"},V={__name:"PokemonItem",props:{data:Object},setup(l){const e=$(),o=l,t=[];o.data.types.map(i=>{t.push(i.type.name)});const u=i=>M[i],d=()=>{e.push({path:"/pokemon/"+o.data.name})};return(i,s)=>{const n=S,r=b,f=T,_=C("router-link");return p(),v(_,{class:"xs:w-10/12 xd:w-56 cursor-pointer",to:"/pokemon/"+o.data.name},{default:y(()=>[m(f,{pt:{content:"p-0"},onClick:d},{content:y(()=>[m(n,{src:l.data.sprites.other["official-artwork"].front_default},null,8,["src"]),a("div",D,L(l.data.name),1),a("div",E,[(p(),g(k,null,P(t,c=>m(r,{style:B({background:`var(${u(c)})`}),label:c,key:c},null,8,["style","label"])),64))])]),_:1})]),_:1},8,["to"])}}},Y=V,x=50,F=N("list",{state:()=>({list:[],searchList:[],interval:{offset:0,limit:x},pageList:[],currentLoad:void 0}),actions:{async loadNext(){const l=await I(this.interval);this.interval.offset+=x;for(let e=0;e<l.results.length;e++){this.currentLoad=(e+1)*2;let o=await A(l.results[e].name);this.list.push(o)}this.currentLoad=0}}}),G={class:"w-full pl-1/12 pr-1/12 m-auto xs:mt-36 xd:mt-24 flex gap-4 flex-wrap justify-center"},Q={class:"flex justify-center mt-8 items-center gap-4 mb-24"},U={class:"fixed top-20 w-full h-1;"},J=a("div",null,null,-1),K=a("div",null,null,-1),_t={__name:"index",setup(l){const e=O(),o=z(),t=F();e.query.search!==void 0&&(typeof e.query.search=="string"?o.selectedTypes=[e.query.search]:o.selectedTypes=e.query.search);const u=q(!0),d=()=>{if(o.selectedTypes.length!==0){t.pageList=[];for(let s=0;s<t.list.length;s++){let n=[];t.list[s].types.map(r=>{n.push(r.type.name)}),o.selectedTypes.every(r=>n.includes(r))&&t.pageList.push(t.list[s])}}else t.pageList=t.list},i=async()=>{u.value=!1,await t.loadNext(),d(),u.value=!0};return H(async()=>{t.pageList.length===0&&await i(),w(o,async()=>{console.log("fas"),d()})}),w(t,()=>{let s=document.body.scrollHeight;window.scrollY+window.innerHeight+200>s&&window.scrollTo(0,document.body.scrollHeight)}),(s,n)=>{const r=Y,f=R,_=j;return p(),g(k,null,[a("main",G,[(p(!0),g(k,null,P(h(t).pageList,(c,W)=>(p(),v(r,{key:"pokemonitem"+c.name,data:c},null,8,["data"]))),128))]),a("div",Q,[a("span",null,L(h(t).pageList.length)+" loaded",1),m(f,{onClick:n[0]||(n[0]=c=>i(s.interval)),label:"More"})]),a("div",U,[J,m(_,{class:"h-1","aria-label":"Status",value:h(t).currentLoad},{default:y(()=>[K]),_:1},8,["value"])])],64)}}};export{_t as default};
