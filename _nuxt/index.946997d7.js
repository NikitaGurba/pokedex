import $ from"./image.esm.82306c7d.js";import C from"./chip.esm.dc4e92e8.js";import b from"./card.esm.07033ab2.js";import{u as B,i as N,t as u,L as k,A as x,z as y,x as f,y as L,v as g,M as w,N as S,O,P as j,Q as q,r as P,R as M,o as I,G as V,S as h,T as z}from"./entry.cf2a7ce9.js";import{T as A}from"./constants.486df467.js";import D from"./progressspinner.esm.66cc9050.js";import E from"./button.esm.c4e03d14.js";import{u as F}from"./types.0047a0b7.js";import{P as G,g as Q}from"./getPokemon.cec33ce2.js";import"./index.esm.8c2d54bf.js";import"./baseicon.esm.8a9ae690.js";import"./basecomponent.esm.fae27831.js";import"./index.esm.6df9552d.js";import"./portal.esm.362e8b7e.js";import"./index.esm.63460380.js";import"./badge.esm.1142a8f1.js";import"./index.esm.b716e011.js";const R={class:"font-bold"},U={class:"flex flex-row gap-1"},W={__name:"PokemonItem",props:{data:Object},setup(r){const e=B(),t=r,p=[];t.data.types.map(s=>{p.push(s.type.name)});const c=s=>A[s],d=()=>{e.push({path:"/pokemon/"+t.data.name})};return(s,_)=>{const i=$,o=C,l=b,n=N("router-link");return u(),k(n,{class:"w-56 cursor-pointer",to:"/pokemon/"+t.data.name},{default:x(()=>[y(l,{pt:{content:"p-0"},onClick:d},{content:x(()=>[y(i,{src:r.data.sprites.other["official-artwork"].front_default},null,8,["src"]),f("div",R,L(r.data.name),1),f("div",U,[(u(),g(w,null,S(p,a=>y(o,{style:O({background:`var(${c(a)})`}),label:a,key:a+s.title},null,8,["style","label"])),64))])]),_:1})]),_:1},8,["to"])}}},Y=W,H=new G({cache:!0}),J=async r=>await H.getPokemonsList(r),K=j("list",{state:()=>({list:[]}),actions:{async getList(r){const e=await J(r);for(let t=0;t<e.results.length;t++){let p=await Q(e.results[t].name);this.list.push(p)}return this.list}}}),X={class:"w-fit pl-1/12 pr-1/12 m-auto mt-24 flex gap-4 flex-wrap justify-center"},Z={class:"flex justify-center"},tt={class:"flex justify-center mt-8 items-center gap-4 mb-24"},v=50,kt={__name:"index",setup(r){const e=q(),t=F(),p=K();e.query.search!==void 0&&(typeof e.query.search=="string"?t.selectedTypes=[e.query.search]:t.selectedTypes=e.query.search);const c=P([]),d=P(!0),s=M({offset:0,limit:v}),_=async i=>{let o={offset:i.offset,limit:i.limit};d.value=!1;const l=await p.getList(o);console.log(i.offset),i.offset+=v;for(let n=o.offset;n<o.offset+o.limit;n++){let a=[];l[n].types.map(m=>{a.push(m.type.name)}),t.selectedTypes.length!==0?t.selectedTypes.every(m=>a.includes(m))&&c.value.push(l[n]):c.value.push(l[n])}d.value=!0};return I(async()=>{await _(s)}),V(t,async()=>{c.value=[],s.offset=0,await _(s)}),(i,o)=>{const l=Y,n=D,a=E;return u(),g(w,null,[f("main",X,[(u(!0),g(w,null,S(h(c),(m,T)=>(u(),k(l,{key:"pokemonitem"+T,data:m},null,8,["data"]))),128))]),f("div",Z,[h(d)?z("",!0):(u(),k(n,{key:0,class:"mt-8 w-16 h-16",strokeWidth:"6"}))]),f("div",tt,[f("span",null,L(h(c).length)+" loaded",1),y(a,{onClick:o[0]||(o[0]=m=>_(s)),label:"More"})])],64)}}};export{kt as default};
