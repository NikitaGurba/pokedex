import{_ as L}from"./PokemonItem.faf214c6.js";import w from"./button.esm.3bbfbf51.js";import k from"./progressbar.esm.1e5d4966.js";import{L as v,M as S,o as P,G as u,v as f,x as n,N as g,O as B,P as c,y as N,z as h,A as T,t as p,Q as b}from"./entry.b9c4f176.js";import{u as q}from"./types.77ae903c.js";import{g as H,a as M}from"./getPokemon.a5055cc4.js";import"./image.esm.7119f524.js";import"./index.esm.0f4d3226.js";import"./baseicon.esm.c4a5d616.js";import"./basecomponent.esm.79e36941.js";import"./index.esm.5701add4.js";import"./portal.esm.815821ec.js";import"./chip.esm.a4f5af50.js";import"./index.esm.39b34a77.js";import"./card.esm.88a88720.js";import"./badge.esm.cebd88c0.js";import"./index.esm.49a43e52.js";const _=50,j=v("list",{state:()=>({list:[],searchList:[],interval:{offset:0,limit:_},pageList:[],currentLoad:void 0}),actions:{async loadNext(){const a=await H(this.interval);this.interval.offset+=_;for(let e=0;e<a.results.length;e++){this.currentLoad=(e+1)*2;let o=await M(a.results[e].name);this.list.push(o)}this.currentLoad=0}}}),A={class:"w-11/12 pl-1/12 pr-1/12 m-auto xs:mt-44 xd:mt-24 gap-4 flex-wrap justify-center grid xs:grid-cols-1 xd:grid-cols-3 lg:grid-cols-5 xl:grid-cols-7"},C={class:"flex justify-center mt-8 items-center gap-4 mb-24"},D={class:"fixed xs:top-40 xd:top-20 w-full h-1;"},O=n("div",null,null,-1),V=n("div",null,null,-1),ot={__name:"index",setup(a){const e=S(),o=q(),t=j();e.query.search!==void 0&&(typeof e.query.search=="string"?o.selectedTypes=[e.query.search]:o.selectedTypes=e.query.search);const m=()=>{if(o.selectedTypes.length!==0){t.pageList=[];for(let s=0;s<t.list.length;s++){let i=[];t.list[s].types.map(r=>{i.push(r.type.name)}),o.selectedTypes.every(r=>i.includes(r))&&t.pageList.push(t.list[s])}}else t.pageList=t.list},d=async()=>{await t.loadNext(),m()};return P(async()=>{t.pageList.length===0&&await d(),u(o,async()=>{m()})}),u(t,()=>{let s=document.body.scrollHeight;window.scrollY+window.innerHeight+200>s&&window.scrollTo(0,document.body.scrollHeight)}),(s,i)=>{const r=L,y=w,x=k;return p(),f(g,null,[n("main",A,[(p(!0),f(g,null,B(c(t).pageList,(l,$)=>(p(),b(r,{key:"pokemonitem"+l.name,data:l},null,8,["data"]))),128))]),n("div",C,[n("span",null,N(c(t).pageList.length)+" loaded",1),h(y,{onClick:i[0]||(i[0]=l=>d(s.interval)),label:"More"})]),n("div",D,[O,h(x,{class:"h-1","aria-label":"Status",value:c(t).currentLoad},{default:T(()=>[V]),_:1},8,["value"])])],64)}}};export{ot as default};
