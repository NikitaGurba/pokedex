import P from"./image.esm.d737c63c.js";import S from"./chip.esm.b571d140.js";import $ from"./card.esm.fce5dbb9.js";import{u as C,i as T,t as c,L as h,A as v,z as d,x as p,y as L,v as g,M as k,N as w,O as b,P as N,Q as B,r as O,o as j,G as q,R as y,S as M}from"./entry.60175b74.js";import{T as R}from"./constants.486df467.js";import I from"./progressspinner.esm.171e55c1.js";import V from"./button.esm.b9b3f505.js";import{g as z,u as A}from"./getPokemonsList.950b38ac.js";import{g as D}from"./getPokemon.cec33ce2.js";import"./index.esm.3a9994a7.js";import"./baseicon.esm.5dd21594.js";import"./basecomponent.esm.6b5a7c00.js";import"./index.esm.4940985b.js";import"./portal.esm.6e1c3642.js";import"./index.esm.77eae0ed.js";import"./badge.esm.d93a2ad4.js";import"./index.esm.bb2c2f61.js";const E={class:"font-bold"},F={class:"flex flex-row gap-1"},G={__name:"PokemonItem",props:{data:Object},setup(o){const e=C(),s=o,t=[];s.data.types.map(n=>{t.push(n.type.name)});const m=n=>R[n],u=()=>{e.push({path:"/pokemon/"+s.data.name})};return(n,a)=>{const r=P,i=S,f=$,_=T("router-link");return c(),h(_,{class:"w-56 cursor-pointer",to:"/pokemon/"+s.data.name},{default:v(()=>[d(f,{pt:{content:"p-0"},onClick:u},{content:v(()=>[d(r,{src:o.data.sprites.other["official-artwork"].front_default},null,8,["src"]),p("div",E,L(o.data.name),1),p("div",F,[(c(),g(k,null,w(t,l=>d(i,{style:b({background:`var(${m(l)})`}),label:l,key:l},null,8,["style","label"])),64))])]),_:1})]),_:1},8,["to"])}}},Q=G,x=50,U=N("list",{state:()=>({list:[],searchList:[],interval:{offset:0,limit:x},pageList:[]}),actions:{async loadNext(){const o=await z(this.interval);this.interval.offset+=x;for(let e=0;e<o.results.length;e++){console.log(e);let s=await D(o.results[e].name);this.list.push(s)}}}}),W={class:"w-fit pl-1/12 pr-1/12 m-auto mt-24 flex gap-4 flex-wrap justify-center"},Y={class:"flex justify-center"},H={class:"flex justify-center mt-8 items-center gap-4 mb-24"},ft={__name:"index",setup(o){const e=B(),s=A(),t=U();e.query.search!==void 0&&(typeof e.query.search=="string"?s.selectedTypes=[e.query.search]:s.selectedTypes=e.query.search);const m=O(!0),u=()=>{if(s.selectedTypes.length!==0){t.pageList=[];for(let a=0;a<t.list.length;a++){let r=[];t.list[a].types.map(i=>{r.push(i.type.name)}),s.selectedTypes.every(i=>r.includes(i))&&t.pageList.push(t.list[a])}}else t.pageList=t.list},n=async()=>{m.value=!1,await t.loadNext(),u(),m.value=!0};return j(async()=>{t.pageList.length===0&&await n(),q(s,async()=>{console.log("fas"),u()})}),(a,r)=>{const i=Q,f=I,_=V;return c(),g(k,null,[p("main",W,[(c(!0),g(k,null,w(y(t).pageList,(l,J)=>(c(),h(i,{key:"pokemonitem"+l.name,data:l},null,8,["data"]))),128))]),p("div",Y,[y(m)?M("",!0):(c(),h(f,{key:0,class:"mt-8 w-16 h-16",strokeWidth:"6"}))]),p("div",H,[p("span",null,L(y(t).pageList.length)+" loaded",1),d(_,{onClick:r[0]||(r[0]=l=>n(a.interval)),label:"More"})])],64)}}};export{ft as default};
